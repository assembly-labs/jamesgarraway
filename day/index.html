<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Daily routine, checklists, and motivation for champions">
  <title>James' Homepage</title>
  <meta name="color-scheme" content="dark light" />
  <link rel="stylesheet" href="../styles/themes.css">
  <link rel="stylesheet" href="../styles/routine.css">
</head>
<body>
  <script src="../js/auth-guard.js"></script>
  <!-- Blaster layers -->
  <div class="blaster-bg" id="blaster-bg" aria-hidden="true"></div>
  <div class="blaster-fg" id="blaster-fg" aria-hidden="true"></div>

  <main class="app">
    <!-- Floating Controls - Top Right -->
    <div class="controls">
      <select id="teamSelect" aria-label="Choose theme"></select>
      <button id="debugBtn" class="debug-btn" title="Reset celebrations & checklists">üîÑ DEBUG</button>
    </div>

    <!-- Header -->
    <div id="header" class="header">
      <h1 id="headerDateTime">Loading...</h1>
    </div>

    <!-- Grid -->
    <div class="grid">
      <!-- Daily Quote -->
      <div class="widget sith-optional" id="w-today-combined">
        <div class="widget-header widget-header-centered">
          <div class="widget-icon">üí¨</div>
          <span>QUOTE OF THE DAY</span>
        </div>
        <div class="widget-body">
          <div class="quote-content">
            <div id="quoteText" class="quote-text">"Loading‚Ä¶"</div>
            <div id="quoteAuthor" class="quote-author">‚Äî</div>
            <div id="quoteExplWrap" class="quote-explanation-wrapper">
              <div class="quote-explanation-box">
                <strong class="quote-explanation-title">üí° What it means:</strong>
                <span id="quoteExplanation"></span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Morning checklist -->
      <div class="widget sith-optional" id="w-morning">
        <div class="widget-header widget-header-centered">
          <div class="widget-icon">üéí</div>
          <span>TO SCHOOL</span>
        </div>
        <div class="widget-body">
          <div id="morningProgress" class="progress-indicator"></div>
          <div id="morningList"></div>
        </div>
      </div>

      <!-- Home checklist -->
      <div class="widget sith-optional" id="w-home">
        <div class="widget-header widget-header-centered">
          <div class="widget-icon">üè†</div>
          <span>BRING HOME</span>
        </div>
        <div class="widget-body">
          <div id="homeProgress" class="progress-indicator"></div>
          <div id="homeList"></div>
        </div>
      </div>

      <!-- Screen time rules -->
      <div class="widget sith-optional" id="w-screen">
        <div class="widget-header widget-header-centered">
          <div class="widget-icon">‚úÖ</div>
          <span>AFTER SCHOOL</span>
        </div>
        <div class="widget-body">
          <div id="screenProgress" class="progress-indicator"></div>
          <div id="screenList"></div>
          <div id="screenAllowance" class="btn-screen-info">‚Äî</div>
        </div>
      </div>

      <!-- ROCK OUT PLAYER -->
      <div class="widget sith-optional music-player" id="w-rock">
        <div class="widget-header"><span>üé∏ ROCK OUT</span></div>
        <div class="widget-body">
          <iframe data-testid="embed-iframe" class="spotify-iframe"
            src="https://open.spotify.com/embed/playlist/1tkUe0mOxMkBv3098t6VMI?utm_source=generator&theme=0"
            width="100%" height="352" frameBorder="0" allowfullscreen=""
            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
            loading="lazy">
          </iframe>
        </div>
      </div>

      <!-- LOFI FOCUS PLAYER -->
      <div class="widget sith-optional music-player" id="w-lofi">
        <div class="widget-header"><span>üéß STUDY FOCUS</span></div>
        <div class="widget-body">
          <iframe data-testid="embed-iframe" class="spotify-iframe"
            src="https://open.spotify.com/embed/playlist/4jAr7WoZjDa5mkdTFoytbS?utm_source=generator&theme=0"
            width="100%" height="352" frameBorder="0" allowfullscreen=""
            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
            loading="lazy">
          </iframe>
        </div>
      </div>
    </div>
  </main>

  <!-- CRITICAL: Load order matters! routine.js depends on themes.js and checklist.js -->
  <script src="../js/themes.js"></script>         <!-- 1. MUST load first (exports teamColors, etc.) -->
  <script src="../js/confetti-cannon.js"></script><!-- 2. Confetti cannon system (exports fireConfettiCannon) -->
  <script src="../js/celebrations.js"></script>   <!-- 3. Celebration effects (exports triggerCelebration) -->
  <script src="../js/checklist.js"></script>      <!-- 4. MUST load after celebrations (uses triggerCelebration) -->
  <script src="../js/routine.js"></script>        <!-- 5. MUST load last (uses above dependencies) -->
</body>
</html>
